<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kgc.dao.RefundOrderMapper">
    <select id="getRefundOrderListByPage" resultType="com.kgc.entity.XsOrder">
        SELECT o.id,
        orderNo,
        orderDate,
        totalNumber,
        totalPrice,
        bankAccountId,
        remark,
        isCheck,
        isCancel,
        refundTypeId,
        xs.type as refundTypeName,
        editStatus,
        cancelStatus,
        o.createBy,
        o.updateBy,
        o.updateDate,
        b.bandCount AS bankAccountName,
        c.userName AS createByName,
        u.userName AS updateByName
        FROM xs_order o
        LEFT JOIN sys_user c ON o.createBy = c.userId AND c.isDel = 0
        LEFT JOIN sys_user u ON o.updateBy = u.userId AND u.isDel = 0
        JOIN bank_account b ON o.bankAccountId = b.id AND b.isDel = 0,
        xs_refundtype xs
        WHERE o.refundTypeId=xs.id and o.isDelete = 0 and o.type=1
        <if test="orderNo!=null and orderNo!=''">and orderNo like concat('%',#{orderNo},'%')</if>
        <if test="orderDate!=null and orderDate!=''">and orderDate between #{orderDateBegin} and #{orderDateEnd}</if>
        order by orderDate DESC
    </select>

</mapper>